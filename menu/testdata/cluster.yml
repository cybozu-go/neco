---
address: 10.0.0.1/24
kind: Network
name: internet
type: external
use-nat: true
---
kind: Network
name: core-to-s1
type: internal
use-nat: false
---
kind: Network
name: core-to-s2
type: internal
use-nat: false
---
kind: Network
name: core-to-ext
type: internal
use-nat: false
---
kind: Network
name: core-to-op
type: internal
use-nat: false
---
kind: Network
name: core-node0
type: internal
use-nat: false
---
kind: Network
name: core-ntp
type: internal
use-nat: false
---
address: 10.72.16.1/20
kind: Network
name: bmc
type: bmc
use-nat: false
---
kind: Network
name: s1-to-r0-1
type: internal
use-nat: false
---
kind: Network
name: s1-to-r0-2
type: internal
use-nat: false
---
kind: Network
name: s1-to-r1-1
type: internal
use-nat: false
---
kind: Network
name: s1-to-r1-2
type: internal
use-nat: false
---
kind: Network
name: s2-to-r0-1
type: internal
use-nat: false
---
kind: Network
name: s2-to-r0-2
type: internal
use-nat: false
---
kind: Network
name: s2-to-r1-1
type: internal
use-nat: false
---
kind: Network
name: s2-to-r1-2
type: internal
use-nat: false
---
kind: Network
name: r0-node1
type: internal
use-nat: false
---
kind: Network
name: r0-node2
type: internal
use-nat: false
---
kind: Network
name: r1-node1
type: internal
use-nat: false
---
kind: Network
name: r1-node2
type: internal
use-nat: false
---
kind: Image
name: ubuntu-cloud-image
url: https://cloud-images.ubuntu.com/releases/16.04/release/ubuntu-16.04-server-cloudimg-amd64-disk1.img
---
file: ./docker.img
kind: Image
name: docker-image
---
file: flatcar_production_qemu_image.img
kind: Image
name: flatcar
---
kind: DeviceClass
name: ssd
path: /var/scratch/placemat/ssd
---
kind: DeviceClass
name: hdd
path: /var/scratch/placemat/hdd
---
cpu: 2
interfaces:
- r0-node1
- r0-node2
kind: Node
memory: 2G
name: boot-0
numa: {}
smbios:
  serial: fb8f2417d0b4db30050719c31ce02a2e8141bbd8
volumes:
- cache: writeback
  copy-on-write: true
  image: ubuntu-cloud-image
  kind: image
  name: root
- kind: localds
  name: seed
  network-config: network.yml
  user-data: seed_boot-0.yml
- kind: hostPath
  name: sabakan
  path: {{.}}
---
interfaces:
- r0-node1
- r0-node2
kind: Node
memory: 2G
name: rack0-cs-1
network-device-queue: 24
numa:
  nodes: 4
smbios:
  serial: 6fe7f121264edcc5ee96a1b5d6693f2e2dfef144
smp:
  cores: 6
  cpus: 12
  sockets: 2
tpm: true
uefi: true
volumes:
- cache: none
  format: raw
  kind: raw
  name: data1
  size: 30G
- cache: none
  format: raw
  kind: raw
  name: data2
  size: 30G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
interfaces:
- r0-node1
- r0-node2
kind: Node
memory: 2G
name: rack0-cs-2
network-device-queue: 24
numa:
  nodes: 4
smbios:
  serial: 51bf2d640b7ef9e6e334e823e8c9b8ac6cea2acc
smp:
  cores: 6
  cpus: 12
  sockets: 2
tpm: true
uefi: true
volumes:
- cache: none
  format: raw
  kind: raw
  name: data1
  size: 30G
- cache: none
  format: raw
  kind: raw
  name: data2
  size: 30G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
cpu: 2
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 2G
name: boot-1
numa: {}
smbios:
  serial: fa362303b7af8c4291773ab496aaca16726beaa3
volumes:
- cache: writeback
  copy-on-write: true
  image: ubuntu-cloud-image
  kind: image
  name: root
- kind: localds
  name: seed
  network-config: network.yml
  user-data: seed_boot-1.yml
- kind: hostPath
  name: sabakan
  path: {{.}}
---
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 2G
name: rack1-cs-1
network-device-queue: 24
numa:
  nodes: 4
smbios:
  serial: 385fba40e1af0daa3dfa0466a5de772eadb7f7ff
smp:
  cores: 6
  cpus: 12
  sockets: 2
tpm: true
uefi: true
volumes:
- cache: none
  format: raw
  kind: raw
  name: data1
  size: 30G
- cache: none
  format: raw
  kind: raw
  name: data2
  size: 30G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 2G
name: rack1-cs-2
network-device-queue: 24
numa:
  nodes: 4
smbios:
  serial: bcd5aad55640610e4c0435bf2718ad8abc13d6a6
smp:
  cores: 6
  cpus: 12
  sockets: 2
tpm: true
uefi: true
volumes:
- cache: none
  format: raw
  kind: raw
  name: data1
  size: 30G
- cache: none
  format: raw
  kind: raw
  name: data2
  size: 30G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
cpu: 1
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 1G
name: rack1-ss-1
network-device-queue: 2
numa: {}
smbios:
  serial: 01e27f9cbcefee819d69091960b88291033c4bac
tpm: true
volumes:
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-1
  size: 50G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-1
  size: 100G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-2
  size: 100G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-3
  size: 100G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
cpu: 1
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 1G
name: rack1-ss-2
network-device-queue: 2
numa: {}
smbios:
  serial: 91252fd04d0f2dffa1e6e1c8361c09df91178723
tpm: true
volumes:
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-1
  size: 50G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-1
  size: 100G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-2
  size: 100G
- cache: none
  device-class: hdd
  format: raw
  kind: raw
  name: data2-3
  size: 100G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
cpu: 1
interfaces:
- r1-node1
- r1-node2
kind: Node
memory: 1G
name: rack1-ss2-1
network-device-queue: 2
numa: {}
smbios:
  serial: 606273ac220fb4c29b98ab01acdf80d3ac28f901
tpm: true
volumes:
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-1
  size: 50G
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-2
  size: 50G
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-3
  size: 50G
- cache: none
  device-class: ssd
  format: raw
  kind: raw
  name: data1-4
  size: 50G
- copy-on-write: true
  image: docker-image
  kind: image
  name: extra0
---
cpu: 2
ignition: chrony.ign
interfaces:
- core-ntp
kind: Node
memory: 4G
name: chrony
numa: {}
smbios: {}
volumes:
- cache: writeback
  copy-on-write: true
  image: flatcar
  kind: image
  name: root
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_core.conf
  - -s
  - /var/run/bird/bird_core.ctl
  name: bird
- command:
  - /usr/sbin/squid
  - -N
  name: squid
init-scripts:
- setup-iptables
interfaces:
- addresses:
  - 10.0.0.2/24
  network: internet
- addresses:
  - 10.72.3.1/24
  network: core-to-ext
- addresses:
  - 10.72.4.1/24
  network: core-to-op
- addresses:
  - 10.0.49.3/32
  network: core-node0
- addresses:
  - 172.16.4.67/29
  network: core-ntp
- addresses:
  - 10.72.2.0/31
  network: core-to-s1
- addresses:
  - 10.72.2.2/31
  network: core-to-s2
kind: NetworkNamespace
name: core
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_spine1.conf
  - -s
  - /var/run/bird/bird_spine1.ctl
  name: bird
init-scripts:
- setup-iptables-spine
interfaces:
- addresses:
  - 10.72.2.1/31
  network: core-to-s1
- addresses:
  - 10.72.16.2/20
  network: bmc
- addresses:
  - 10.72.1.0/31
  network: s1-to-r0-1
- addresses:
  - 10.72.1.2/31
  network: s1-to-r0-2
- addresses:
  - 10.72.1.4/31
  network: s1-to-r1-1
- addresses:
  - 10.72.1.6/31
  network: s1-to-r1-2
kind: NetworkNamespace
name: spine1
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_spine2.conf
  - -s
  - /var/run/bird/bird_spine2.ctl
  name: bird
init-scripts:
- setup-iptables-spine
interfaces:
- addresses:
  - 10.72.2.3/31
  network: core-to-s2
- addresses:
  - 10.72.16.3/20
  network: bmc
- addresses:
  - 10.72.1.8/31
  network: s2-to-r0-1
- addresses:
  - 10.72.1.10/31
  network: s2-to-r0-2
- addresses:
  - 10.72.1.12/31
  network: s2-to-r1-1
- addresses:
  - 10.72.1.14/31
  network: s2-to-r1-2
kind: NetworkNamespace
name: spine2
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_rack0-tor1.conf
  - -s
  - /var/run/bird/bird_rack0-tor1.ctl
  name: bird
- command:
  - /usr/sbin/dnsmasq
  - --keep-in-foreground
  - --pid-file=/var/run/dnsmasq_rack0-tor1.pid
  - --log-facility=-
  - --dhcp-relay
  - 10.69.0.65,10.69.0.195
  name: dnsmasq
interfaces:
- addresses:
  - 10.72.1.1/31
  network: s1-to-r0-1
- addresses:
  - 10.72.1.9/31
  network: s2-to-r0-1
- addresses:
  - 10.69.0.65/26
  network: r0-node1
kind: NetworkNamespace
name: rack0-tor1
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_rack0-tor2.conf
  - -s
  - /var/run/bird/bird_rack0-tor2.ctl
  name: bird
- command:
  - /usr/sbin/dnsmasq
  - --keep-in-foreground
  - --pid-file=/var/run/dnsmasq_rack0-tor2.pid
  - --log-facility=-
  - --dhcp-relay
  - 10.69.0.129,10.69.0.195
  name: dnsmasq
interfaces:
- addresses:
  - 10.72.1.3/31
  network: s1-to-r0-2
- addresses:
  - 10.72.1.11/31
  network: s2-to-r0-2
- addresses:
  - 10.69.0.129/26
  network: r0-node2
kind: NetworkNamespace
name: rack0-tor2
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_rack1-tor1.conf
  - -s
  - /var/run/bird/bird_rack1-tor1.ctl
  name: bird
- command:
  - /usr/sbin/dnsmasq
  - --keep-in-foreground
  - --pid-file=/var/run/dnsmasq_rack1-tor1.pid
  - --log-facility=-
  - --dhcp-relay
  - 10.69.1.1,10.69.0.3
  name: dnsmasq
interfaces:
- addresses:
  - 10.72.1.5/31
  network: s1-to-r1-1
- addresses:
  - 10.72.1.13/31
  network: s2-to-r1-1
- addresses:
  - 10.69.1.1/26
  network: r1-node1
kind: NetworkNamespace
name: rack1-tor1
---
apps:
- command:
  - /usr/sbin/bird
  - -f
  - -c
  - /etc/bird/bird_rack1-tor2.conf
  - -s
  - /var/run/bird/bird_rack1-tor2.ctl
  name: bird
- command:
  - /usr/sbin/dnsmasq
  - --keep-in-foreground
  - --pid-file=/var/run/dnsmasq_rack1-tor2.pid
  - --log-facility=-
  - --dhcp-relay
  - 10.69.1.65,10.69.0.3
  name: dnsmasq
interfaces:
- addresses:
  - 10.72.1.7/31
  network: s1-to-r1-2
- addresses:
  - 10.72.1.15/31
  network: s2-to-r1-2
- addresses:
  - 10.69.1.65/26
  network: r1-node2
kind: NetworkNamespace
name: rack1-tor2
---
init-scripts:
- setup-default-gateway-external
interfaces:
- addresses:
  - 10.72.3.2/24
  network: core-to-ext
kind: NetworkNamespace
name: external
---
init-scripts:
- setup-default-gateway-operation
interfaces:
- addresses:
  - 10.72.4.2/24
  network: core-to-op
kind: NetworkNamespace
name: operation
