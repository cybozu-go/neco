Ignition-template
=========
[ignition-template](../ignition-template) automatically generates Ignition Template files for each environment such as `common-<cluster>.yml` and `site-<cluster>.yml`.
It can also generate Ignition Template files such as `site.yml`.
The Ignition Template files are generated based on [settings.json](../ignition-template/settings.json).
If you change the contents of the Ignition Template files or add new Ignition Template files, please modify the [settings.json](../ignition-template/settings.json) file.
For more information on the Ignition template system, please refer to the [Ignition](./ignition.md) documentation.

Ignition template files can be generated by the following command.
```bash
make setup
# Generate and place site.yml|site-<cluster>.yml files.
make site-env
# Generate and place config.yml|config-<cluster>.yml files.
make common-env
```

## Generate diffs of configurations for each environment

A configgenerator command is provided to examine the differences between each environment.
The configgenerator generates a pseudo-Ignition file based on the specified role and cluster.
Configgenerator command takes a cluster as an option and will work even if only the role is specified.
The generated pseudo-Ignition file can be checked for differences between environments with the `git diff` command.

The following commands can be used to generate pseudo-Ignition files by specifying roles and clusters.
The generated pseudo-Ignition file's contents are output to stdout.
If you want to compare generated files, please redirect stdout and save to files.
```console
$ make build
$ ./bin/configgenerator --cluster=<cluster name> <role>
```

The command to display the differences in pseudo-Ignition for each environment is as follows.
```console
$ git diff /tmp/roles/<role>/site.yml /tmp/roles/test1/site-<cluster>.yml
```
